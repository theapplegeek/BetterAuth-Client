<div class="app-modal-panel max-w-xl">
  @if (
    host.activeModal() === 'create' ||
    host.activeModal() === 'edit'
  ) {
    <form
      class="space-y-4"
      [formGroup]="host.permissionForm"
      (ngSubmit)="host.savePermission()"
    >
      <div class="app-modal-header">
        <h3 class="app-modal-title">
          {{
            host.activeModal() === 'create'
              ? 'Create Permission'
              : 'Edit Permission'
          }}
        </h3>
        <button
          class="app-modal-close"
          type="button"
          aria-label="Close dialog"
          (click)="onClose()"
        >
          <span
            class="icon-[heroicons--x-mark] size-5"
          ></span>
        </button>
      </div>
      <div>
        <label
          class="mb-1 text-sm font-medium text-gray-700 dark:text-gray-300 block"
        >
          Code
        </label>
        <input
          class="rounded-lg border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:text-white w-full border"
          formControlName="code"
          type="text"
        />
      </div>
      <div>
        <label
          class="mb-1 text-sm font-medium text-gray-700 dark:text-gray-300 block"
        >
          Name
        </label>
        <input
          class="rounded-lg border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:text-white w-full border"
          formControlName="name"
          type="text"
        />
      </div>
      <div>
        <label
          class="mb-1 text-sm font-medium text-gray-700 dark:text-gray-300 block"
        >
          Description
        </label>
        <input
          class="rounded-lg border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:text-white w-full border"
          formControlName="description"
          type="text"
        />
      </div>
      <div class="gap-2 flex justify-end">
        <button
          class="app-btn-secondary"
          type="button"
          (click)="onClose()"
        >
          Cancel
          <span class="app-kbd">ESC</span>
        </button>
        <button
          class="app-btn-primary"
          type="submit"
          [disabled]="host.isSaving()"
        >
          {{ host.isSaving() ? 'Saving...' : 'Save' }}
          @if (!host.isSaving()) {
            <span class="app-kbd">ENTER</span>
          }
        </button>
      </div>
    </form>
  }

  @if (
    host.activeModal() === 'delete' &&
    host.selectedPermission()
  ) {
    <div class="space-y-4">
      <div class="app-modal-header">
        <h3 class="app-modal-title">
          Delete permission "{{
            host.selectedPermission()!.code
          }}"?
        </h3>
        <button
          class="app-modal-close"
          type="button"
          aria-label="Close dialog"
          (click)="onClose()"
        >
          <span
            class="icon-[heroicons--x-mark] size-5"
          ></span>
        </button>
      </div>
      <p
        class="text-sm text-gray-600 dark:text-gray-400"
      >
        This permission will be permanently removed.
      </p>
      <div class="gap-2 flex justify-end">
        <button
          class="app-btn-secondary"
          type="button"
          (click)="onClose()"
        >
          Cancel
          <span class="app-kbd">ESC</span>
        </button>
        <button
          class="app-btn-danger"
          type="button"
          [disabled]="host.isDeleting()"
          (click)="host.deletePermission()"
        >
          {{
            host.isDeleting()
              ? 'Deleting...'
              : 'Delete Permission'
          }}
          @if (!host.isDeleting()) {
            <span class="app-kbd">ENTER</span>
          }
        </button>
      </div>
    </div>
  }
</div>
